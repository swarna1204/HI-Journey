<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>VR Hand Controller Raycast Debug</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
</head>

<body>
    <a-scene background="color: #111">
        <!-- Ground -->
        <a-plane position="0 0 -4" rotation="-90 0 0" width="10" height="10" color="#444"></a-plane>

        <!-- Red Box to point at -->
        <a-box position="0 1.5 -3" color="red" class="clickable"></a-box>

        <!-- Light -->
        <a-entity light="type: directional; intensity: 1" position="1 2 1"></a-entity>
        <a-entity light="type: ambient; intensity: 0.6"></a-entity>

        <!-- Camera Rig + Cursor -->
        <a-entity id="rig" position="0 1.6 0">
            <a-camera>
                <a-cursor fuse="false" raycaster="objects: .clickable" material="color: yellow"
                    geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.02" position="0 0 -1">
                </a-cursor>
            </a-camera>

            <!-- Right controller -->
            <a-entity id="rightHand" laser-controls="hand: right" raycaster="objects: .clickable; showLine: true"
                line="color: #FF4081" debug-controller>
            </a-entity>
        </a-entity>
    </a-scene>

    <script>
        AFRAME.registerComponent('debug-controller', {
            init: function () {
                const el = this.el;

                el.addEventListener('triggerdown', function () {
                    const raycaster = el.components.raycaster;
                    const intersects = raycaster ? raycaster.intersections : [];
                    if (intersects.length > 0) {
                        console.log('âœ… Controller Trigger HIT:', intersects[0].object.name || intersects[0].object.el);
                    } else {
                        console.log('âŒ Trigger pressed, but no intersection');
                    }
                });

                el.addEventListener('raycaster-intersection', function (e) {
                    console.log('ğŸ¯ Raycaster seeing:', e.detail.els);
                });

                el.addEventListener('raycaster-intersection-cleared', function () {
                    console.log('âšª Raycaster cleared');
                });
            }
        });
    </script>
</body>

</html>